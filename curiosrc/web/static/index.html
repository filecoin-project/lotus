<html>
<head>
    <title>Curio Cluster Overview</title>
    <script src="https://unpkg.com/htmx.org@1.9.5" integrity="sha384-xcuj3WpfgjlKF+FXhSQFQ0ZNr39ln+hwjN3npfM9VBnUskLolQAcN80McRIVOPuO" crossorigin="anonymous"></script>
    <script type="module" src="chain-connectivity.js"></script>
    <link rel="stylesheet" href="main.css">
    <link rel='stylesheet' href='https://cdn.jsdelivr.net/npm/hack-font@3.3.0/build/web/hack-subset.css'>
    <style>
        .deadline-box {
            display: grid;
            grid-template-columns: repeat(16, auto);
            grid-template-rows: repeat(3, auto);
            grid-gap: 1px;
        }

        .deadline-entry {
            width: 10px;
            height: 10px;
            background-color: grey;
            margin: 1px;
        }

        .deadline-entry-cur {
            border-bottom: 3px solid deepskyblue;
            height: 7px;
        }

        .deadline-proven {
            background-color: green;
        }
        .deadline-partially-faulty {
            background-color: yellow;
        }
        .deadline-faulty {
            background-color: red;
        }
    </style>
</head>
<body>
<div class="app-head">
    <div class="head-left">
        <h1>Curio Cluster</h1>
    </div>
    <div class="head-right">
        version [todo]
    </div>
</div>
<hr/>
<div class="page">
    <div class="info-block">
        <h2>Chain Connectivity</h2>
        <chain-connectivity></chain-connectivity>
    </div>
    <hr>
    <div class="info-block">
        <h2>Cluster Machines</h2>
        <table>
            <thead>
            <tr>
                <th>Host</th>
                <th>ID</th>
                <th>Last Contact</th>
                <th>Tasks (24h)</th>
            </tr>
            </thead>
            <tbody hx-get="/hapi/simpleinfo/machines" hx-trigger="load,every 5s">
            </tbody>
        </table>
    </div>
    <hr>
    <div class="info-block">
        <h2><a href="/pipeline_porep.html">PoRep Pipeline</a></h2>
        <table>
            <thead>
            <tr>
                <th>Address</th>
                <th>SDR</th>
                <th>Trees</th>
                <th>Precommit Msg</th>
                <th>Wait Seed</th>
                <th>PoRep</th>
                <th>Commit Msg</th>
                <th>Done</th>
                <th>Failed</th>
            </tr>
            </thead>
            <tbody hx-get="/hapi/simpleinfo/pipeline-porep" hx-trigger="load,every 5s">
            </tbody>
        </table>
    </div>
    <hr>
    <div class="info-block">
        <h2>Actor Summary</h2>
        <table>
            <thead>
            <tr>
                <th>Address</th>
                <th>Config Layers</th>
                <th>QaP</th>
                <th>Deadlines</th>
                <th>Balance</th>
                <th>Available</th>
                <th>Worker</th>
                <th>Wins</th>
            </tr>
            </thead>
            <tbody hx-get="/hapi/simpleinfo/actorsummary" hx-trigger="load,every 5s">
            </tbody>
        </table>
    </div>
    <hr>
    <div class="info-block">
        <h2>Recently Finished Tasks</h2>
        <table>
            <thead>
            <tr>
                <th>Name</th>
                <th>ID</th>
                <th>Executor</th>
                <th>Posted</th>
                <th>Start</th>
                <th>Queued</th>
                <th>Took</th>
                <th>Outcome</th>
                <th>Message</th>
            </tr>
            </thead>
            <tbody hx-get="/hapi/simpleinfo/taskhistory" hx-trigger="load, every 2s">
            </tbody>
        </table>
    </div>
    <hr>
    <div class="info-block">
        <h2>Cluster Tasks</h2>
        <table>
            <thead>
            <tr>
                <th style="min-width: 128px">Task</th>
                <th>ID</th>
                <th>Posted</th>
                <th>Owner</th>
            </tr>
            </thead>
            <tbody hx-get="/hapi/simpleinfo/tasks" hx-trigger="load,every 1s">
            </tbody>
        </table>
    </div>
</div>
</body>
</html>